# TUI 动画状态指示器 - 快速测试指南

## 🚀 快速开始

### 1. 编译（已完成）

```bash
✓ 可执行文件: bin/kore.exe (23MB)
✓ 所有自动化测试通过
```

### 2. 启动 TUI

```bash
.\bin\kore.exe chat --ui tui
```

**预期界面**:
```
┌─────────────────────────────────────────┐
│                                         │
│  [消息显示区域]                         │
│  - AI 回复（支持 Markdown）            │
│  - 代码块高亮                          │
│                                         │
│  >> 输入你的问题...                      │
│                                         │
│  ○ 准备就绪                              │
│  [Ctrl+↑/↓:滚动] [Ctrl+D/Tab:显示详情]  │
└─────────────────────────────────────────┘
```

---

## 🧪 5 分钟快速测试

### 测试 1: 思考状态（30 秒）

```
输入: 你好
按: Enter

预期: 状态栏变为 "●●● 思考中..." (蓝色)
```

### 测试 2: 读取文件状态（1 分钟）

```
输入: 读取 README.md
按: Enter
确认: 是 (Y)

预期:
1. 状态变为 "... 读取文件..." (青色)
2. 读取完成后显示 "✓ 完成" (绿色)
3. 2 秒后自动恢复为 "○ 准备就绪"
```

### 测试 3: 详情切换（30 秒）

```
步骤:
1. 在任何操作进行中按 Ctrl+d
2. 观察状态栏变化
3. 再次按 Ctrl+d

预期:
1. 状态栏变为 2 行
2. 显示 "└─ 文件: README.md"
3. 再次按 Ctrl+d 隐藏详情
```

### 测试 4: 滚动功能（30 秒）

```
步骤:
1. 发送多条消息产生滚动
2. 按 Ctrl+↑ 向上滚动
3. 按 Ctrl+↓ 向下滚动

预期: 消息区域可以平滑滚动
```

### 测试 5: 错误处理（1 分钟）

```
输入: 读取不存在的文件 xyz.go
按: Enter

预期:
1. 工具执行失败
2. 显示 "✗ 错误: 文件未找到" (红色)
3. 2 秒后自动恢复为 "○ 准备就绪"
```

---

## 🎨 状态指示器参考

### 颜色编码

| 图标 | 颜色 | 状态 | 说明 |
|------|------|------|------|
| ○ | 灰色 | Idle | 准备就绪 |
| ●●● | 蓝色 | Thinking | AI 思考中 |
| ... | 青色 | Reading | 读取文件 |
| │ ─ │ | 紫色 | Searching | 搜索代码 |
| ▁ ▃ ▅ ▆ | 橙色 | Executing | 执行工具 |
| ✓ | 绿色 | Success | 操作成功 |
| ✗ | 红色 | Error | 操作错误 |

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Ctrl+↑/↓` | 滚动消息历史 |
| `ESC` | 切换输入焦点 |
| `Ctrl+d` 或 `Tab` | 切换详情显示 |
| `Ctrl+C` | 退出程序 |

---

## 📊 测试结果报告

### 自动化测试

```
✅ 编译验证 - 通过
✅ 代码完整性 - 通过
✅ 文档检查 - 通过
✅ Git 提交 - 通过 (5个提交)
```

### 手动测试

- [ ] 测试 1: 思考状态
- [ ] 测试 2: 读取文件状态
- [ ] 测试 3: 详情切换
- [ ] 测试 4: 滚动功能
- [ ] 测试 5: 错误处理

---

## 🐛 遇到问题？

### 问题 1: 状态栏不显示动画

**可能原因**: Agent 集成未生效

**解决方案**:
```bash
# 确认使用最新编译的版本
go build -o bin/kore.exe ./cmd/kore/
```

### 问题 2: 详情切换不工作

**可能原因**: 未在操作进行中按 Ctrl+d

**解决方案**: 等待工具执行（如读取文件）时按 Ctrl+d

### 问题 3: 颜色显示不正确

**可能原因**: 终端不支持 ANSI 颜色

**解决方案**:
- Windows: 使用 Windows Terminal
- Linux/macOS: 使用 iTerm2 或 GNOME Terminal

---

## 📝 完整测试清单

详见: [test_tui_animated_status.md](test_tui_animated_status.md)

包含 15 项详细测试用例

---

## 🎯 下一步

### 测试通过后

1. **合并到主分支**:
   ```bash
   git checkout feature/foundation
   git merge feature/tui-animated-status
   ```

2. **创建 Pull Request**:
   ```bash
   gh pr create --title "feat: Add animated status indicators to TUI"
   ```

3. **标记为 Ready to Review**

### 需要修复

1. 在 GitHub Issues 中报告问题
2. 修复后重新测试
3. 更新测试报告

---

## 📚 相关文档

- [设计文档](docs/plans/2026-01-17-tui-animated-status-indicators-design.md)
- [测试总结](TEST_SUMMARY.md)
- [用户指南](docs/USER_GUIDE.md)
- [架构文档](docs/ARCHITECTURE.md)

---

**祝你测试愉快！** 🎉

如有任何问题，请随时反馈。
